# ğŸ”¥ AIBE1-Team03 ë¶€í•˜í…ŒìŠ¤íŠ¸ ì „ìš© ì„¤ì • íŒŒì¼
# ëŒ€ê¸°ì—´ ì‹œìŠ¤í…œì„ ìš°íšŒí•˜ì—¬ ì‹¤ì œ ì„œë²„ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ê¸° ìœ„í•œ ì„¤ì •

app:
  queue:
    max-active-users: 2000  # ğŸ¯ ë‹¨ê³„ë³„ ë³‘ëª© ê°ì§€ìš© (5 â†’ 2000) - 1500ëª… ëª©í‘œì— ì—¬ìœ ë¶„
    access-key-ttl-seconds: 7200  # ğŸ• í…ŒìŠ¤íŠ¸ ì‹œê°„ ê³ ë ¤í•´ì„œ 2ì‹œê°„ìœ¼ë¡œ ì—°ì¥
    top-ranker-count: 200  # ğŸ† ëŒ€ê¸°ì—´ ìˆœìœ„ ê³„ì‚° ìµœì í™” (5 â†’ 200)
  websocket:
    scheduler-health:
      delay-ms: 30000  # ğŸ“Š WebSocket ë¡œê¹… ì£¼ê¸° ì—°ì¥ (10ì´ˆ â†’ 30ì´ˆ)

  # ğŸŒ ë„ë©”ì¸ ì„¤ì • (ìš´ì˜ê³¼ ë™ì¼)
  base-url: ${BASE_URL:https://d123456789.cloudfront.net}
  front-base-url: ${FRONT_BASE_URL}


seat:
  reservation:
    ttl-minutes: 10  # ğŸª‘ ì¢Œì„ ì„ ì  ì‹œê°„ ì—°ì¥ (5ë¶„ â†’ 10ë¶„)
    max-seat-count: 5  # ğŸ« ì‚¬ìš©ìë‹¹ ìµœëŒ€ ì„ ì  ì¢Œì„ ì¦ê°€ (2ê°œ â†’ 5ê°œ)
    last-update-ttl-hours: 2  # â° ìºì‹œ TTL ì—°ì¥ (1ì‹œê°„ â†’ 2ì‹œê°„)
  polling:
    default-timeout-ms: 60000  # â±ï¸ í´ë§ íƒ€ì„ì•„ì›ƒ ì¦ê°€ (30ì´ˆ â†’ 60ì´ˆ)
    max-timeout-ms: 120000  # ğŸ“ˆ ìµœëŒ€ íƒ€ì„ì•„ì›ƒ ì¦ê°€ (60ì´ˆ â†’ 120ì´ˆ)
    min-timeout-ms: 1000  # âš¡ ìµœì†Œ íƒ€ì„ì•„ì›ƒ ê°ì†Œ (5ì´ˆ â†’ 1ì´ˆ)
  session:
    max-sessions-per-concert: 5000  # ğŸµ ì½˜ì„œíŠ¸ë‹¹ ìµœëŒ€ ì„¸ì…˜ ì¦ê°€ (1000 â†’ 5000)
    cleanup-minutes: 10  # ğŸ§¹ ì„¸ì…˜ ì •ë¦¬ ê°„ê²© ì—°ì¥ (5ë¶„ â†’ 10ë¶„)
  lock:
    wait-time-seconds: 1  # ğŸ”’ ë½ ëŒ€ê¸° ì‹œê°„ ë‹¨ì¶• (3ì´ˆ â†’ 1ì´ˆ)
    lease-time-seconds: 5  # â° ë½ ë³´ìœ  ì‹œê°„ ë‹¨ì¶• (10ì´ˆ â†’ 5ì´ˆ)
  cache:
    warmup-minutes-before: 30  # ğŸ”¥ ìºì‹œ ì›Œë°ì—… ì‹œê°„ ì—°ì¥ (10ë¶„ â†’ 30ë¶„)

  scheduler:
    seat-cache-warmup:
      enabled: true
      interval-minutes: 2  # ğŸš€ ì‹¤í–‰ ì£¼ê¸° ë‹¨ì¶• (5ë¶„ â†’ 2ë¶„)
      warmup-minutes-before: 30  # ğŸ“ˆ ì›Œë°ì—… ì‹œê°„ ì—°ì¥
      lock-wait-seconds: 10  # âš¡ ë½ ëŒ€ê¸° ì‹œê°„ ë‹¨ì¶• (30ì´ˆ â†’ 10ì´ˆ)
      lock-lease-seconds: 120  # â±ï¸ ë½ ìœ ì§€ ì‹œê°„ ë‹¨ì¶• (300ì´ˆ â†’ 120ì´ˆ)
    waiting-queue:
      enabled: true  # ğŸ”„ ëŒ€ê¸°ì—´ ìŠ¤ì¼€ì¤„ëŸ¬ í™œì„±í™” (ë³‘ëª© í…ŒìŠ¤íŠ¸ìš©)
      interval-seconds: 5  # âš¡ ì‹¤í–‰ ì£¼ê¸° ë‹¨ì¶• (10ì´ˆ â†’ 5ì´ˆ) - ë¹ ë¥¸ ëŒ€ê¸°ì—´ ì²˜ë¦¬

spring:
  application:
    name: ticketmon-go-scenario-test  # ğŸ·ï¸ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ ì‹ë³„ìš© ì´ë¦„

  # ğŸ”§ ìš´ì˜ í™˜ê²½ ì„¤ì •ì„ ìƒì†í•˜ë˜ ë¶€í•˜í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ ì¼ë¶€ ìˆ˜ì •
  profiles:
    include: s3  # S3 ì„¤ì • í¬í•¨

  datasource:
    url: ${DB_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver
    # ğŸ¯ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ìš© ì»¤ë„¥ì…˜ í’€ ìµœì í™”
    hikari:
      maximum-pool-size: 30  # ğŸ“ˆ ë‹¨ê³„ë³„ ì¦ê°€ ê³ ë ¤ (ê¸°ë³¸ 10 â†’ 30)
      minimum-idle: 10  # ğŸ”„ ê¸°ë³¸ ìœ íœ´ ì»¤ë„¥ì…˜
      connection-timeout: 3000  # â±ï¸ ë¹ ë¥¸ ì‘ë‹µ ìœ„í•œ íƒ€ì„ì•„ì›ƒ ë‹¨ì¶•
      idle-timeout: 600000  # ğŸ• 10ë¶„ ìœ íœ´ íƒ€ì„ì•„ì›ƒ
      max-lifetime: 1800000  # â° 30ë¶„ ìµœëŒ€ ìƒëª…ì£¼ê¸°

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false  # ğŸ”‡ ë¶€í•˜í…ŒìŠ¤íŠ¸ ì¤‘ SQL ë¡œê·¸ ë¹„í™œì„±í™” (ì„±ëŠ¥ í–¥ìƒ)
    properties:
      hibernate:
        jdbc:
          batch_size: 50  # ğŸ“¦ ë°°ì¹˜ í¬ê¸° ì¦ê°€
        order_inserts: true  # ğŸ”„ ì‚½ì… ìˆœì„œ ìµœì í™”
        order_updates: true  # ğŸ”„ ì—…ë°ì´íŠ¸ ìˆœì„œ ìµœì í™”

  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST}
      port: ${SPRING_DATA_REDIS_PORT}
      username: ${SPRING_DATA_REDIS_USERNAME}
      password: ${SPRING_DATA_REDIS_PASSWORD}
      ssl:
        enabled: true
      # ğŸ¯ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ìš© Redis ì»¤ë„¥ì…˜ ìµœì í™”
      lettuce:
        pool:
          max-active: 30  # ğŸ“ˆ ëŒ€ê¸°ì—´ ì²˜ë¦¬ ê³ ë ¤í•œ ì»¤ë„¥ì…˜ ìˆ˜
          max-idle: 15  # ğŸ”„ ì ì • ìœ íœ´ ì»¤ë„¥ì…˜
          min-idle: 5  # âš¡ ìµœì†Œ ìœ íœ´ ì»¤ë„¥ì…˜
          max-wait: 2000ms  # â±ï¸ ëŒ€ê¸°ì—´ ì‘ë‹µì„± ê³ ë ¤í•œ ëŒ€ê¸° ì‹œê°„

  # ğŸ”§ OAuth ì„¤ì • (ìš´ì˜ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€)
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            client-name: Google
            authorization-grant-type: authorization_code
            redirect-uri: 'https://api.ticket-mon.o-r.kr/login/oauth2/code/google'
            scope:
              - profile
              - email

  servlet:
    multipart:
      max-file-size: 50MB  # ğŸ“ íŒŒì¼ í¬ê¸° ì œí•œ ì¦ê°€ (11MB â†’ 50MB)
      max-request-size: 50MB

  # ğŸ¯ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ìš© íƒœìŠ¤í¬ ìŠ¤ì¼€ì¤„ë§
  task:
    scheduling:
      enabled: true
      pool:
        size: 15  # ğŸ“ˆ ëŒ€ê¸°ì—´ + ì¢Œì„ ìŠ¤ì¼€ì¤„ëŸ¬ ê³ ë ¤ (10 â†’ 15)
      thread-name-prefix: "scenario-scheduler-"
    execution:
      pool:
        core-size: 15  # ğŸ“ˆ ì‹œë‚˜ë¦¬ì˜¤ ì²˜ë¦¬ìš© (8 â†’ 15)
        max-size: 30  # ğŸ“ˆ ìµœëŒ€ ìŠ¤ë ˆë“œ ì œí•œ (20 â†’ 30)
        queue-capacity: 500  # ğŸ“¦ ì ì • ëŒ€ê¸° í ìœ ì§€

server:
  port: ${SERVER_PORT:8080}
  # ğŸ¯ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ìš© ì„œë²„ ìµœì í™”
  tomcat:
    threads:
      max: 300  # ğŸ“ˆ 1500ëª… ë™ì ‘ ê³ ë ¤í•œ ìŠ¤ë ˆë“œ ìˆ˜ (ê¸°ë³¸ 200 â†’ 300)
      min-spare: 30  # ğŸ”„ ê¸°ë³¸ ìœ íœ´ ìŠ¤ë ˆë“œ
    max-connections: 1500  # ğŸŒ ëª©í‘œ ë™ì ‘ì— ë§ì¶˜ ì»¤ë„¥ì…˜ ìˆ˜
    accept-count: 200  # ğŸ“Š ì ì • ëŒ€ê¸° í í¬ê¸°
    connection-timeout: 3000  # â±ï¸ ë¹ ë¥¸ ì‘ë‹µì„ ìœ„í•œ íƒ€ì„ì•„ì›ƒ

# ğŸ“Š ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ìš© ë¡œê¹… ì„¤ì •
logging:
  level:
    root: INFO  # ğŸ“ ë³‘ëª© ë¶„ì„ì„ ìœ„í•œ ì •ë³´ ìˆ˜ì§‘
    org.springframework.web: WARN  # ğŸ”‡ ì›¹ ë¡œê·¸ ì œí•œ
    com.team03: DEBUG  # ğŸ” íŒ€ íŒ¨í‚¤ì§€ ìƒì„¸ ë¡œê¹… (ë³‘ëª© ë¶„ì„ìš©)
    com.team03.ticketmon.queue: INFO  # ğŸ”´ ëŒ€ê¸°ì—´ ë¡œì§ ëª¨ë‹ˆí„°ë§
    com.team03.ticketmon.seat: INFO  # ğŸª‘ ì¢Œì„ ê´€ë ¨ ë¡œì§ ëª¨ë‹ˆí„°ë§
    com.zaxxer.hikari: WARN  # ğŸ”‡ HikariCP ì¤‘ìš” ë¡œê·¸ë§Œ
    org.hibernate: WARN  # ğŸ”‡ Hibernate ê²½ê³ ë§Œ
    org.springframework.data.redis: WARN  # ğŸ”‡ Redis ê²½ê³ ë§Œ
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level [SCENARIO-TEST] %logger{36} - %msg%n"

# â˜ï¸ AWS ì„¤ì • (ìš´ì˜ê³¼ ë™ì¼)
cloud:
  aws:
    credentials:
      access-key: ${AWS_ACCESS_KEY_ID}
      secret-key: ${AWS_SECRET_ACCESS_KEY}
    region:
      static: ap-northeast-2
    s3:
      bucket: ticketmon-prod-assets
      profile-prefix: profile-imgs/
      poster-prefix: poster-imgs/
      seller-docs-prefix: seller-docs/

# ğŸ” JWT ì„¤ì • (ìš´ì˜ê³¼ ë™ì¼)
jwt:
  secret: ${JWT_SECRET_KEY}
  access-expiration-ms: ${JWT_ACCESS_EXPIRATION_MS:600000}
  refresh-expiration-ms: ${JWT_REFRESH_EXPIRATION_MS:86400000}

# â˜ï¸ AWS SQS ì„¤ì • (ìš´ì˜ê³¼ ë™ì¼)
aws:
  sqs:
    endpoint: ${SQS_ENDPOINT}
    access-key: ${AWS_ACCESS_KEY_ID}
    secret-key: ${AWS_SECRET_ACCESS_KEY}

# ğŸ“š Swagger ì„¤ì •
swagger:
  enabled: true  # ğŸ” ë¶€í•˜í…ŒìŠ¤íŠ¸ ì¤‘ API ë¬¸ì„œ í™œì„±í™” (ë””ë²„ê¹…ìš©)

# ğŸ’³ í† ìŠ¤í˜ì´ë¨¼ì¸  ì„¤ì • (ìš´ì˜ê³¼ ë™ì¼)
toss:
  client-key: ${TOSS_CLIENT_KEY}
  secret-key: ${TOSS_SECRET_KEY}
  api:
    url: https://api.tosspayments.com/v1/payments/
    confirm-url: ${toss.api.url}confirm

# ğŸ¤– AI ì„¤ì • (ìš´ì˜ê³¼ ë™ì¼)
ai:
  together:
    api-key: ${TOGETHER_API_KEY}
    api-url: https://api.together.xyz/v1/chat/completions
    model: meta-llama/Llama-3.3-70B-Instruct-Turbo-Free
    timeout-seconds: 30
    max-retries: 3
    max-tokens-per-request: 100000
    max-reviews-per-request: 50
    chars-per-token: 2.5
    token-safety-margin: 0.2

  summary:
    condition:
      min-review-count: 10
      significant-count-change: 3
      significant-count-change-ratio: 0.2
      update-on-any-content-change: true
      max-update-interval-hours: 168

# ğŸŒ CORS ì„¤ì • (ë¶€í•˜í…ŒìŠ¤íŠ¸ìš© ì¶”ê°€)
cors:
  allowed-origins:
    - "https://ticket-mon.o-r.kr"
    - "https://api.ticket-mon.o-r.kr"
    - "http://localhost:3000"  # ğŸ§ª ë¡œì»¬ í…ŒìŠ¤íŠ¸ìš©
    - "*"  # ğŸš€ ë¶€í•˜í…ŒìŠ¤íŠ¸ ì¤‘ ëª¨ë“  Origin í—ˆìš©

# ğŸ“± OneSignal ì„¤ì • (ìš´ì˜ê³¼ ë™ì¼)
onesignal:
  app-id: ${ONESIGNAL_APP_ID}
  api-key: ${ONESIGNAL_API_KEY}

# ğŸ¯ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ ì „ìš© ì„¤ì •
scenario-test:
  enabled: true  # ğŸš€ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ ëª¨ë“œ í™œì„±í™”
  target-concurrent-users: 1500  # ğŸ“ˆ ëª©í‘œ ë™ì ‘ ì‚¬ìš©ì ìˆ˜
  queue-gradual-expansion: true  # ğŸ”„ ë‹¨ê³„ë³„ ëŒ€ê¸°ì—´ í™•ì¥ ëª¨ë“œ
  bottleneck-detection: true  # ğŸ” ë³‘ëª© ê°ì§€ ëª¨ë“œ í™œì„±í™”
  performance-monitoring: true  # ğŸ“Š ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ í™œì„±í™”
  stage-based-testing: true  # ğŸ“ˆ ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ ëª¨ë“œ